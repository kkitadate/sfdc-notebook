# セキュリティとアクセス

アドミニストレーター試験での割合 : 14%

## 試験範囲

- [組織のセキュリティ](security-and-access.md#組織のセキュリティ)のさまざまなオプションについて説明する (例: [パスワード](security-and-access.md#パスワード)、 [IP 制限](security-and-access.md#IP制限)、[アイデンティティ確認](security-and-access.md#アイデンティティ確認)、[ネットワーク設定](security-and-access.md#ネットワーク設定))
- Salesforce の[共有モデル](security-and-access.md#共有モデル)の機能について説明する (例: [レコード所有権](security-and-access.md#レコード所有権)、[組織の共有設定](security-and-access.md#組織の共有設定)、[ロールとロール階層](security-and-access.md#ロールとロール階層)、[共有の直接設定](security-and-access.md#共有の直接設定)、[共有ルールと公開グループ](security-and-access.md#共有ルールと公開グループ))
- 与えられたシナリオに従って、[カスタムプロファイル](security-and-access.md#カスタムプロファイル)や[権限セット](security-and-access.md#権限セット)の適切な使用方法を判断する
- コミュニケーションテンプレート、ダッシュボード、レポートの[フォルダの構成方法](security-and-access.md#フォルダの構成方法)について説明する


### 組織のセキュリティ

- 組織へのログインアクセスの制限
  - 有効化プロセス: 確認コードを使用
    - ユーザのID確認
    - ブラウザへのクッキー保存

#### パスワード

ユーザのパスワードが強固で安全なものとなるように設定できる。

- パスワードポリシー
  - ユーザパスワードの有効期間
  - ログイン試行とロックアウト期間
    - ログイン失敗によりロックするまでの回数
    - ロックアウトの有効期間
- ユーザパスワードのリセット
  - ユーザレコードより[パスワードのリセット]を選択

#### IP制限

- [ユーザが Salesforce にログインできる範囲と時間帯の制限](https://help.salesforce.com/articleView?id=admin_loginrestrict.htm&type=5)
  - 設定 > [プロファイル]より設定可能
    - ログイン時間帯の制限
    - ログイン IP アドレスの制限
- [組織の信頼済み IP 範囲の設定](https://help.salesforce.com/articleView?id=security_networkaccess.htm&type=5)
  - 設定 > [ネットワークアクセス]
  - ユーザの有効化プロセス(確認コードを使用したID確認)を回避できる
  - ログインの問題を解決後はログイン可能(モバイルデバイスまたはメールアドレスに送信されたコード入力など)
- プロファイルを使用した IP アドレスによるログインアクセスの制限
  - 設定 > [プロファイル] > 任意のプロファイル設定より[ログイン IP アドレスの制限]

#### ログインセキュリティ

1. プロファイルのログイン時間帯制限の範囲か？
  - 範囲外の場合, ログイン不可
  - 指定なし, または範囲内の場合, 次の条件へ
2. プロファイルのログインIPアドレス制限の範囲か？
  - 範囲外の場合, ログイン不可
  - 範囲内の場合, ログイン成功
  - 指定なしの場合, 次の条件へ
3. 組織の信頼済みIP範囲の範囲か？
  - 範囲内の場合, ログイン成功
  - 指定なし, または範囲外の場合, 次の条件へ
4. ログイン方法はどちらか？
  - ブラウザ利用
  - API経由

#### アイデンティティ確認

[Identity の基本 | Salesforce Trailhead](https://trailhead.salesforce.com/ja/content/learn/modules/identity_basics)

#### ネットワーク設定

[組織の信頼済み IP 範囲の設定](https://help.salesforce.com/articleView?id=security_networkaccess.htm&type=5)

### 状態チェック

- 設定 | セキュリティ | 状態チェック
- 以下のセキュリティリスクを判定
  - パスワードポリシー
  - セッションの設定
  - ネットワークアクセス
  - ログインアクセスポリシー
  - リモートサイトの設定

### 共有モデル

- 組織の共有設定、ロール階層、共有の関係

#### 組織の共有設定

- 設定 | セキュリティ | 共有設定
- ユーザの所有していないレコードへのデフォルトアクセスレベルを設定
  - 参照を許可しない場合
    - 非公開
  - 編集を許可しない場合
    - 公開(参照のみ)
  - 制限なしの場合
    - 参照/更新
    - 参照/更新/所有権の移行(リード、ケースのみ)

#### ロールとロール階層

- 組織の縦へのアクセスを開放する
- ロール階層
  - 設定 | セキュリティ | 共有設定 より、[組織の共有設定] > [階層を使用したアクセス許可]をオン
  - 設定 | ユーザ | ロール より[ロールの設定]を選択

### レコードアクセス権の例外

- システム管理者が設定する

#### 共有ルールと公開グループ

- 組織の横へのアクセスを開放する
- 共有ルール
  - 設定 | セキュリティ | 共有設定 より, [共有ルール]を参照
  - 組織の共有設定に対する例外
    - 以下にのみ設定可能(ユーザ,キュー,プロファイルには設定不可)
      - 公開グループ
      - ロール＆下位ロール
  - ルールタイプ
    - レコード所有者に基づく
      - あるユーザグループが所有するものを別のユーザグループに共有する
    - 条件に基づく
      - ある条件を満たすものをあるユーザグループへ共有する
- 公開グループ
  - 設定 | ユーザ | 公開グループ
  - 多数のユーザに関わる共有ルールを簡単に作成するために使用する
    - 作成した公開グループに対し, 共有ルールを設定可能
- マネージャのグループ
  - 設定 | セキュリティ | 共有設定 の[その他の設定]を参照

### その他のレコードアクセス権の例外

- 所有者 または 所有者よりも上位階層のユーザにより設定可能

#### チーム

- チームの有効化, ページレイアウトへの追加が必要
  - 取引先チーム
    - 設定 | 機能設定 | セールス | 取引先チーム
  - 商談チーム
    - 設定 | 機能設定 | セールス | 商談 | 商談チームの設定

#### 共有の直接設定

- 他のユーザの所有するレコードへの一時的なアクセスを許可できる
  - 所有していないデータへのアクセス権をコントロールする
- Lightning非対応(Classicのみ)
  - [Lightning Experience ロードマップ](https://help.salesforce.com/articleView?id=lex_roadmap.htm&type=5) -> 「共有: レコードの手動共有」
  - AppExchangeに対応版アプリあり

### カスタムプロファイル

- 標準ユーザプロファイルをコピーしてカスタムプロファイルを作成
  - オブジェクト権限を編集したい場合など(標準プロファイルは変更不可)

### 権限セット

#### オブジェクト権限

- ユーザが操作(参照,作成,編集,削除)できるレコードの種類を決定するもの
  - 個々のレコード自体のを決定するものではない

#### レコードアクセス権

- 個々のレコードを決定する

#### レコード所有権

- デフォルトアクセス権の基準となるもの
- レコードの所有者は以下のアクセス権をもつ(フルアクセス権)
  - 参照, 編集
  - 所有権の移行
  - 削除
- 関連する取引先へのアクセス権
  - 所有者がで別のユーザであっても, 少なくとも参照アクセス権が与えられる
- ロールの作成時

#### 拡張プロファイルリストビュー

- 設定 | ユーザ | ユーザ管理設定 より, [拡張プロファイルリストビュー]を有効化
  - プロファイル画面にて, チェックボックスのダブルクリックによる操作可能
  - 複数プロファイルを選択し, 一括で編集が可能

#### 権限セットの使用

- 特定ユーザの既存のプロファイルに対し権限を追加
- ユーザのアクセス権は以下を組み合わせて決定される
  - ユーザプロファイル
  - ユーザレコードに割り当てられた権限セット

### 項目レベルセキュリティ

- ユーザの参照,編集可能な項目を, ユーザのプロファイルに基づいて制限できる
- アクセス制限の対象は以下
  - レコード詳細ページ, レコード編集ページ
  - 関連リスト
  - 検索結果
  - レポート
  - リストビュー
- 設定 | セキュリティ | 項目アクセス許可
  - 項目ごとの参照
    - 複数プロファイルに対し, 項目のアクセス権が設定可能
    - オブジェクトマネージャからでも編集可能
  - プロファイルごとの参照
    - 複数項目に対し, 項目のアクセス権が設定可能
    - ユーザプロファイル設定からでも編集可能
  - レコードタイプごとの参照
    - 複数項目, 複数プロファイルのマトリクスにて確認可能
- 項目レベルセキュリティでは, 必須項目の設定はないことに注意

### フォルダの構成方法


## 参照

- [データセキュリティ | Salesforce Trailhead](https://trailhead.salesforce.com/ja/content/learn/modules/data_security)
- [Salesforce セキュリティガイド | Salesforce Developers](https://developer.salesforce.com/docs/atlas.ja-jp.securityImplGuide.meta/securityImplGuide/salesforce_security_guide.htm)

### Salesforce Help

- [Salesforce 組織の設定および管理 > ユーザのアクセス権の制御](https://help.salesforce.com/articleView?id=security_data_access.htm&type=5)
